# üîç **SEO Audit APIs - Comprehensive Documentation**

## üìã **API Overview**

H·ªá th·ªëng Audit APIs cung c·∫•p kh·∫£ nƒÉng ph√¢n t√≠ch SEO to√†n di·ªán cho website, bao g·ªìm ki·ªÉm tra k·ªπ thu·∫≠t, hi·ªáu su·∫•t, n·ªôi dung v√† kh·∫£ nƒÉng ti·∫øp c·∫≠n. T·∫•t c·∫£ APIs ƒë·ªÅu y√™u c·∫ßu JWT authentication v√† ki·ªÉm tra quy·ªÅn s·ªü h·ªØu project.

---

## üöÄ **1. Create New Audit - T·∫°o Audit M·ªõi**

### **Endpoint**

```http
POST /api/v1/projects/{projectId}/audits
```

### **Description**

Kh·ªüi t·∫°o m·ªôt audit SEO m·ªõi cho project. Audit s·∫Ω ƒë∆∞·ª£c x·ª≠ l√Ω trong background v√† tr·∫£ v·ªÅ k·∫øt qu·∫£ chi ti·∫øt v·ªÅ t√¨nh tr·∫°ng SEO c·ªßa website.

### **Headers**

```http
Authorization: Bearer {jwt_token}
Content-Type: application/json
```

### **Path Parameters**

| Parameter | Type | Required | Description              |
| --------- | ---- | -------- | ------------------------ |
| projectId | UUID | Yes      | ID c·ªßa project c·∫ßn audit |

### **Request Body**

```json
{
  "include_mobile": true,
  "check_accessibility": true,
  "analyze_performance": true,
  "check_seo": true,
  "check_content": true,
  "check_technical": true,
  "validate_html": false,
  "check_links": true,
  "check_images": true,
  "check_meta": true,
  "audit_type": "full",
  "pages": ["https://example.com", "https://example.com/about"],
  "max_depth": 3,
  "settings": {
    "timeout": 30000,
    "user_agent": "RankTracker Bot"
  }
}
```

### **Request Body Fields**

| Field               | Type     | Required | Default | Description                                                                |
| ------------------- | -------- | -------- | ------- | -------------------------------------------------------------------------- |
| include_mobile      | boolean  | No       | false   | Bao g·ªìm ki·ªÉm tra mobile-friendly                                           |
| check_accessibility | boolean  | No       | false   | Ki·ªÉm tra tu√¢n th·ªß WCAG accessibility                                       |
| analyze_performance | boolean  | No       | false   | Ph√¢n t√≠ch hi·ªáu su·∫•t website                                                |
| check_seo           | boolean  | No       | true    | Ki·ªÉm tra c√°c y·∫øu t·ªë SEO c∆° b·∫£n                                             |
| check_content       | boolean  | No       | true    | Ph√¢n t√≠ch ch·∫•t l∆∞·ª£ng n·ªôi dung                                              |
| check_technical     | boolean  | No       | true    | Ki·ªÉm tra k·ªπ thu·∫≠t SEO                                                      |
| validate_html       | boolean  | No       | false   | Validate HTML markup                                                       |
| check_links         | boolean  | No       | true    | Ki·ªÉm tra broken links                                                      |
| check_images        | boolean  | No       | true    | Ph√¢n t√≠ch t·ªëi ∆∞u h√≥a h√¨nh ·∫£nh                                              |
| check_meta          | boolean  | No       | true    | Ki·ªÉm tra meta tags                                                         |
| audit_type          | enum     | No       | "full"  | Lo·∫°i audit: "technical", "content", "performance", "accessibility", "full" |
| pages               | string[] | No       | []      | Danh s√°ch URLs c·ª• th·ªÉ ƒë·ªÉ audit                                             |
| max_depth           | number   | No       | 3       | ƒê·ªô s√¢u crawl t·ªëi ƒëa                                                        |
| settings            | object   | No       | {}      | C√†i ƒë·∫∑t t√πy ch·ªânh cho audit                                                |

### **Response - Success (201)**

```json
{
  "id": "550e8400-e29b-41d4-a716-446655440000",
  "projectId": "123e4567-e89b-12d3-a456-426614174000",
  "status": "pending",
  "results": {
    "config": {
      "include_mobile": true,
      "check_accessibility": true,
      "analyze_performance": true,
      "audit_type": "full",
      "pages": ["https://example.com"],
      "max_depth": 3
    },
    "started_at": "2025-07-27T21:30:00.000Z",
    "progress": 0
  },
  "createdAt": "2025-07-27T21:30:00.000Z",
  "completedAt": null,
  "message": "Audit queued for processing",
  "estimated_duration": "2 minutes"
}
```

### **Response - Error (403)**

```json
{
  "statusCode": 403,
  "message": "Monthly audit limit reached. Upgrade your plan to run more audits.",
  "error": "Forbidden"
}
```

### **Use Cases**

- Ki·ªÉm tra SEO t·ªïng qu·∫£ website m·ªõi
- Audit ƒë·ªãnh k·ª≥ ƒë·ªÉ theo d√µi ti·∫øn b·ªô SEO
- Ph√¢n t√≠ch c·ª• th·ªÉ mobile performance
- Ki·ªÉm tra accessibility compliance

---

## üìä **2. Get Project Audits - Danh S√°ch Audits**

### **Endpoint**

```http
GET /api/v1/projects/{projectId}/audits
```

### **Description**

L·∫•y danh s√°ch t·∫•t c·∫£ audits c·ªßa m·ªôt project v·ªõi ph√¢n trang v√† t√¨m ki·∫øm.

### **Headers**

```http
Authorization: Bearer {jwt_token}
```

### **Path Parameters**

| Parameter | Type | Required | Description    |
| --------- | ---- | -------- | -------------- |
| projectId | UUID | Yes      | ID c·ªßa project |

### **Query Parameters**

| Parameter | Type   | Required | Default     | Description                |
| --------- | ------ | -------- | ----------- | -------------------------- |
| page      | number | No       | 1           | S·ªë trang                   |
| limit     | number | No       | 10          | S·ªë l∆∞·ª£ng items per page    |
| search    | string | No       | -           | T√¨m ki·∫øm theo t√™n ho·∫∑c URL |
| sortBy    | string | No       | "createdAt" | S·∫Øp x·∫øp theo field         |
| sortOrder | string | No       | "desc"      | Th·ª© t·ª±: "asc" ho·∫∑c "desc"  |

### **Response - Success (200)**

```json
{
  "data": [
    {
      "id": "550e8400-e29b-41d4-a716-446655440000",
      "projectId": "123e4567-e89b-12d3-a456-426614174000",
      "status": "completed",
      "results": {
        "overview": {
          "score": 85,
          "total_issues": 12
        }
      },
      "createdAt": "2025-07-27T21:30:00.000Z",
      "completedAt": "2025-07-27T21:33:00.000Z"
    }
  ],
  "total": 25,
  "page": 1,
  "limit": 10,
  "totalPages": 3
}
```

### **Use Cases**

- Xem l·ªãch s·ª≠ audit c·ªßa project
- So s√°nh k·∫øt qu·∫£ audit theo th·ªùi gian
- Qu·∫£n l√Ω audits v·ªõi ph√¢n trang

---

## üìà **3. Get Audit Summary - T·ªïng Quan Audits**

### **Endpoint**

```http
GET /api/v1/projects/{projectId}/audits/summary
```

### **Description**

L·∫•y t·ªïng quan th·ªëng k√™ audits c·ªßa project, bao g·ªìm audit g·∫ßn nh·∫•t v√† ph√¢n b·ªë theo tr·∫°ng th√°i.

### **Headers**

```http
Authorization: Bearer {jwt_token}
```

### **Path Parameters**

| Parameter | Type | Required | Description    |
| --------- | ---- | -------- | -------------- |
| projectId | UUID | Yes      | ID c·ªßa project |

### **Response - Success (200)**

```json
{
  "latestAudit": {
    "id": "550e8400-e29b-41d4-a716-446655440000",
    "status": "completed",
    "results": {
      "overview": {
        "score": 85,
        "total_issues": 12,
        "critical_issues": 2
      }
    },
    "createdAt": "2025-07-27T21:30:00.000Z",
    "completedAt": "2025-07-27T21:33:00.000Z"
  },
  "stats": {
    "completed": 15,
    "pending": 1,
    "running": 0,
    "failed": 2
  }
}
```

### **Use Cases**

- Dashboard overview cho project
- Hi·ªÉn th·ªã tr·∫°ng th√°i audit g·∫ßn nh·∫•t
- Th·ªëng k√™ t·ªïng quan performance

---

## üîç **4. Get Audit Details - Chi Ti·∫øt Audit**

### **Endpoint**

```http
GET /api/v1/audits/{auditId}
```

### **Description**

L·∫•y th√¥ng tin chi ti·∫øt c·ªßa m·ªôt audit c·ª• th·ªÉ, bao g·ªìm c·∫•u h√¨nh v√† metadata.

### **Headers**

```http
Authorization: Bearer {jwt_token}
```

### **Path Parameters**

| Parameter | Type | Required | Description  |
| --------- | ---- | -------- | ------------ |
| auditId   | UUID | Yes      | ID c·ªßa audit |

### **Response - Success (200)**

```json
{
  "id": "550e8400-e29b-41d4-a716-446655440000",
  "projectId": "123e4567-e89b-12d3-a456-426614174000",
  "status": "completed",
  "results": {
    "config": {
      "include_mobile": true,
      "check_accessibility": true,
      "audit_type": "full"
    },
    "started_at": "2025-07-27T21:30:00.000Z",
    "progress": 100
  },
  "createdAt": "2025-07-27T21:30:00.000Z",
  "completedAt": "2025-07-27T21:33:00.000Z",
  "project": {
    "id": "123e4567-e89b-12d3-a456-426614174000",
    "name": "My Website",
    "domain": "https://example.com"
  }
}
```

### **Response - Error (404)**

```json
{
  "statusCode": 404,
  "message": "Audit not found",
  "error": "Not Found"
}
```

### **Use Cases**

- Xem chi ti·∫øt c·∫•u h√¨nh audit
- Ki·ªÉm tra metadata v√† timing
- Debug audit issues

---

## ‚è±Ô∏è **5. Get Audit Status - Tr·∫°ng Th√°i Audit**

### **Endpoint**

```http
GET /api/v1/audits/{auditId}/status
```

### **Description**

Ki·ªÉm tra tr·∫°ng th√°i hi·ªán t·∫°i v√† ti·∫øn ƒë·ªô c·ªßa audit. S·ª≠ d·ª•ng ƒë·ªÉ polling trong qu√° tr√¨nh audit ƒëang ch·∫°y.

### **Headers**

```http
Authorization: Bearer {jwt_token}
```

### **Path Parameters**

| Parameter | Type | Required | Description  |
| --------- | ---- | -------- | ------------ |
| auditId   | UUID | Yes      | ID c·ªßa audit |

### **Response - Success (200)**

```json
{
  "id": "550e8400-e29b-41d4-a716-446655440000",
  "status": "running",
  "created_at": "2025-07-27T21:30:00.000Z",
  "completed_at": null,
  "progress": 65,
  "config": {
    "include_mobile": true,
    "check_accessibility": true,
    "audit_type": "full",
    "pages": ["https://example.com"],
    "max_depth": 3
  }
}
```

### **Status Values**

| Status    | Description                 |
| --------- | --------------------------- |
| pending   | Audit ƒëang ch·ªù x·ª≠ l√Ω        |
| running   | Audit ƒëang ƒë∆∞·ª£c th·ª±c hi·ªán   |
| completed | Audit ho√†n th√†nh th√†nh c√¥ng |
| failed    | Audit th·∫•t b·∫°i              |

### **Use Cases**

- Polling ƒë·ªÉ theo d√µi ti·∫øn ƒë·ªô audit
- Hi·ªÉn th·ªã progress bar
- Ki·ªÉm tra tr·∫°ng th√°i tr∆∞·ªõc khi l·∫•y k·∫øt qu·∫£

---

## üìã **6. Get Audit Results - K·∫øt Qu·∫£ Audit**

### **Endpoint**

```http
GET /api/v1/audits/{auditId}/results
```

### **Description**

L·∫•y k·∫øt qu·∫£ ƒë·∫ßy ƒë·ªß c·ªßa audit ƒë√£ ho√†n th√†nh, bao g·ªìm ƒëi·ªÉm s·ªë, issues v√† recommendations.

### **Headers**

```http
Authorization: Bearer {jwt_token}
```

### **Path Parameters**

| Parameter | Type | Required | Description               |
| --------- | ---- | -------- | ------------------------- |
| auditId   | UUID | Yes      | ID c·ªßa audit ƒë√£ completed |

### **Response - Success (200)**

```json
{
  "id": "550e8400-e29b-41d4-a716-446655440000",
  "status": "completed",
  "results": {
    "overview": {
      "score": 85,
      "total_issues": 12,
      "critical_issues": 2,
      "warnings": 7,
      "passed_checks": 68
    },
    "technical_seo": {
      "score": 90,
      "issues": [
        {
          "type": "warning",
          "title": "Missing Meta Descriptions",
          "description": "3 pages are missing meta descriptions",
          "impact": "medium",
          "recommendation": "Add unique meta descriptions to improve click-through rates",
          "affected_pages": ["/about", "/contact", "/services"]
        },
        {
          "type": "error",
          "title": "Missing XML Sitemap",
          "description": "No XML sitemap found",
          "impact": "high",
          "recommendation": "Create and submit an XML sitemap to search engines"
        }
      ]
    },
    "content_analysis": {
      "score": 82,
      "issues": [
        {
          "type": "warning",
          "title": "Thin Content",
          "description": "2 pages have less than 300 words",
          "impact": "medium",
          "recommendation": "Expand content to provide more value to users",
          "affected_pages": ["/privacy", "/terms"]
        }
      ]
    },
    "performance": {
      "score": 78,
      "metrics": {
        "page_speed": 75,
        "core_web_vitals": {
          "lcp": 2.1,
          "fid": 85,
          "cls": 0.08
        },
        "mobile_friendly": true
      },
      "issues": [
        {
          "type": "error",
          "title": "Large Images",
          "description": "Several images are not optimized",
          "impact": "high",
          "recommendation": "Compress and optimize images to improve loading speed"
        }
      ]
    },
    "accessibility": {
      "score": 88,
      "issues": [
        {
          "type": "error",
          "title": "Missing Alt Text",
          "description": "5 images are missing alt text",
          "impact": "high",
          "recommendation": "Add descriptive alt text to all images",
          "wcag_level": "A"
        }
      ]
    },
    "pages_analyzed": [
      {
        "url": "https://example.com",
        "status_code": 200,
        "title": "Homepage Title",
        "meta_description": "Homepage meta description",
        "h1_count": 1,
        "word_count": 450,
        "issues_count": 3,
        "score": 88
      },
      {
        "url": "https://example.com/about",
        "status_code": 200,
        "title": "About Us",
        "meta_description": "",
        "h1_count": 1,
        "word_count": 280,
        "issues_count": 5,
        "score": 72
      }
    ],
    "completed_at": "2025-07-27T21:33:15.000Z",
    "processing_time": 3000
  },
  "createdAt": "2025-07-27T21:30:00.000Z",
  "completedAt": "2025-07-27T21:33:15.000Z"
}
```

### **Response - Error (400)**

```json
{
  "statusCode": 400,
  "message": "Audit is not completed yet",
  "error": "Bad Request"
}
```

### **Issue Types**

| Type    | Description                      | Priority |
| ------- | -------------------------------- | -------- |
| error   | V·∫•n ƒë·ªÅ nghi√™m tr·ªçng c·∫ßn s·ª≠a ngay | High     |
| warning | V·∫•n ƒë·ªÅ c·∫ßn ch√∫ √Ω                 | Medium   |
| info    | Th√¥ng tin tham kh·∫£o              | Low      |

### **Impact Levels**

| Impact | Description                    |
| ------ | ------------------------------ |
| high   | ·∫¢nh h∆∞·ªüng nghi√™m tr·ªçng ƒë·∫øn SEO |
| medium | ·∫¢nh h∆∞·ªüng v·ª´a ph·∫£i             |
| low    | ·∫¢nh h∆∞·ªüng nh·ªè                  |

### **Use Cases**

- Hi·ªÉn th·ªã b√°o c√°o audit ƒë·∫ßy ƒë·ªß
- Xu·∫•t PDF report
- Ph√¢n t√≠ch chi ti·∫øt c√°c issues
- T·∫°o action plan SEO

---

## üóëÔ∏è **7. Delete Audit - X√≥a Audit**

### **Endpoint**

```http
DELETE /api/v1/audits/{auditId}
```

### **Description**

X√≥a m·ªôt audit kh·ªèi h·ªá th·ªëng. Kh√¥ng th·ªÉ x√≥a audit ƒëang ch·∫°y.

### **Headers**

```http
Authorization: Bearer {jwt_token}
```

### **Path Parameters**

| Parameter | Type | Required | Description          |
| --------- | ---- | -------- | -------------------- |
| auditId   | UUID | Yes      | ID c·ªßa audit c·∫ßn x√≥a |

### **Response - Success (200)**

```json
{
  "message": "Audit deleted successfully"
}
```

### **Response - Error (400)**

```json
{
  "statusCode": 400,
  "message": "Cannot delete a running audit",
  "error": "Bad Request"
}
```

### **Use Cases**

- D·ªçn d·∫πp audits c≈©
- X√≥a audit test
- Qu·∫£n l√Ω storage

---

## üîê **Authentication & Authorization**

### **JWT Token Required**

T·∫•t c·∫£ APIs y√™u c·∫ßu JWT token trong header:

```http
Authorization: Bearer {your_jwt_token}
```

### **Permission Checks**

- User ch·ªâ c√≥ th·ªÉ audit projects m√† h·ªç s·ªü h·ªØu
- Ki·ªÉm tra subscription limits tr∆∞·ªõc khi t·∫°o audit
- Rate limiting theo plan c·ªßa user

---

## üìä **Subscription Limits**

### **Free Plan**

- 1 audit/th√°ng
- Basic checks only
- 3 pages maximum

### **Pro Plan**

- 10 audits/th√°ng
- All features
- 50 pages maximum

### **Enterprise Plan**

- Unlimited audits
- All features
- Unlimited pages

---

## üö® **Error Codes & Handling**

### **Common Error Responses**

#### **401 Unauthorized**

```json
{
  "statusCode": 401,
  "message": "Unauthorized",
  "error": "Unauthorized"
}
```

#### **403 Forbidden**

```json
{
  "statusCode": 403,
  "message": "You do not have access to this project",
  "error": "Forbidden"
}
```

#### **404 Not Found**

```json
{
  "statusCode": 404,
  "message": "Project not found",
  "error": "Not Found"
}
```

#### **400 Bad Request**

```json
{
  "statusCode": 400,
  "message": [
    "include_mobile must be a boolean value",
    "pages must be an array of URLs"
  ],
  "error": "Bad Request"
}
```

#### **429 Too Many Requests**

```json
{
  "statusCode": 429,
  "message": "Too many requests. Please try again later.",
  "error": "Too Many Requests"
}
```

---

## üîÑ **Workflow Examples**

### **Basic Audit Workflow**

```javascript
// 1. Start audit
const audit = await createAudit(projectId, config);

// 2. Poll for completion
while (audit.status !== 'completed') {
  await sleep(2000);
  const status = await getAuditStatus(audit.id);
  updateProgressBar(status.progress);
}

// 3. Get results
const results = await getAuditResults(audit.id);
displayResults(results);
```

### **Batch Processing**

```javascript
// Audit multiple websites
const projects = ['project1', 'project2', 'project3'];
const audits = await Promise.all(
  projects.map((projectId) => createAudit(projectId, config)),
);

// Monitor all audits
const results = await Promise.all(
  audits.map((audit) => pollUntilComplete(audit.id)),
);
```

---

## üìà **Performance Considerations**

### **Rate Limiting**

- 10 requests/minute per user cho audit creation
- 60 requests/minute cho status checking
- 100 requests/minute cho result retrieval

### **Caching**

- Audit results ƒë∆∞·ª£c cache 24 hours
- Status responses ƒë∆∞·ª£c cache 30 seconds
- Summary data ƒë∆∞·ª£c cache 5 minutes

### **Timeouts**

- Audit creation: 30 seconds
- Status check: 10 seconds
- Results retrieval: 60 seconds

---

## üéØ **Best Practices**

### **For Frontend Developers**

1. **Polling Strategy**: Use exponential backoff cho status polling
2. **Progress Display**: Hi·ªÉn th·ªã progress bar v·ªõi estimated time
3. **Error Handling**: Implement retry logic cho failed requests
4. **Caching**: Cache results locally ƒë·ªÉ tr√°nh re-fetch

### **For Backend Integration**

1. **Webhooks**: Consider webhooks thay v√¨ polling cho enterprise users
2. **Batch Processing**: Group multiple audits ƒë·ªÉ optimize performance
3. **Data Export**: Implement CSV/PDF export cho audit results
4. **Historical Analysis**: Store audit history ƒë·ªÉ trend analysis

---

## üîó **Related APIs**

- **Projects API**: Qu·∫£n l√Ω projects
- **Users API**: User authentication
- **Subscriptions API**: Plan management
- **Reports API**: Generate PDF reports

---

## üìû **Support**

ƒê·ªÉ h·ªó tr·ª£ k·ªπ thu·∫≠t ho·∫∑c c√¢u h·ªèi v·ªÅ APIs:

- Email: support@ranktracker.com
- Documentation: https://docs.ranktracker.com
- Status Page: https://status.ranktracker.com
